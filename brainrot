-- Botón flotante autoclick móvil con drag + clics reales
-- Hecho por Adrian (MACRO UI)

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local VirtualUser = game:GetService("VirtualUser")
local player = Players.LocalPlayer
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.ResetOnSpawn = false

-- UI: Botón flotante
local boton = Instance.new("TextButton")
boton.Size = UDim2.new(0, 100, 0, 40)
boton.Position = UDim2.new(0, 100, 0, 100)
boton.BackgroundColor3 = Color3.fromRGB(255, 0, 50)
boton.Text = "AutoClick"
boton.TextColor3 = Color3.fromRGB(255, 255, 255)
boton.TextScaled = true
boton.Font = Enum.Font.GothamBlack
boton.AnchorPoint = Vector2.new(0.5, 0.5)
boton.Draggable = false
boton.Parent = gui

-- Variables para drag
local dragging = false
local dragInput, mousePos, framePos

-- Función de drag
local function activarDrag(frame)
	frame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			mousePos = input.Position
			framePos = frame.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	frame.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			local delta = input.Position - mousePos
			frame.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X, framePos.Y.Scale, framePos.Y.Offset + delta.Y)
		end
	end)
end

activarDrag(boton)

-- Función de autoclick real
local function simularClick()
	VirtualUser:Button1Down(Vector2.new(), workspace.CurrentCamera.CFrame)
	task.wait()
	VirtualUser:Button1Up(Vector2.new(), workspace.CurrentCamera.CFrame)
end

-- Activar clicks al tocar botón
boton.MouseButton1Click:Connect(function()
	for i = 1, 4 do -- 4 clics por toque, ajustable
		task.spawn(simularClick)
		task.wait(0.035)
	end
end)

-- Notificación
pcall(function()
	game:GetService("StarterGui"):SetCore("SendNotification", {
		Title = "Botón Flotante Listo",
		Text = "Toca para autoclick sin bug de cámara",
		Duration = 3
	})
end)
