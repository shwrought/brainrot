local player = game.Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")
local uis = game:GetService("UserInputService")
local run = game:GetService("RunService")

-- Variables de vuelo
local flySpeed = 2
local flying = true
local directions = {F = false, B = false, L = false, R = false, U = false, D = false}

-- Crear UI principal
local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
gui.Name = "MobileFlyUI"
gui.ResetOnSpawn = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 160, 0, 160)
frame.Position = UDim2.new(0, 20, 0, 300)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.Active = true
frame.Draggable = true

-- Función para crear botón
local function createBtn(text, pos, callback)
	local btn = Instance.new("TextButton", frame)
	btn.Size = UDim2.new(0, 45, 0, 45)
	btn.Position = pos
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.SourceSansBold
	btn.TextSize = 22
	btn.AutoButtonColor = true
	btn.MouseButton1Down:Connect(callback)
	return btn
end

-- Botones de dirección
createBtn("↑", UDim2.new(0, 57, 0, 5), function() directions.F = true end).MouseButton1Up:Connect(function() directions.F = false end)
createBtn("↓", UDim2.new(0, 57, 0, 105), function() directions.B = true end).MouseButton1Up:Connect(function() directions.B = false end)
createBtn("←", UDim2.new(0, 10, 0, 55), function() directions.L = true end).MouseButton1Up:Connect(function() directions.L = false end)
createBtn("→", UDim2.new(0, 105, 0, 55), function() directions.R = true end).MouseButton1Up:Connect(function() directions.R = false end)
createBtn("⤒", UDim2.new(0, 10, 0, 5), function() directions.U = true end).MouseButton1Up:Connect(function() directions.U = false end)
createBtn("⤓", UDim2.new(0, 105, 0, 5), function() directions.D = true end).MouseButton1Up:Connect(function() directions.D = false end)

-- Botones de velocidad
createBtn("+", UDim2.new(0, 10, 0, 105), function()
	flySpeed = math.min(flySpeed + 1, 50)
end)

createBtn("-", UDim2.new(0, 105, 0, 105), function()
	flySpeed = math.max(flySpeed - 1, 1)
end)

-- Movimiento constante en RunService
run.RenderStepped:Connect(function()
	if flying and hrp then
		local moveVec = Vector3.new()
		if directions.F then moveVec = moveVec + (hrp.CFrame.LookVector) end
		if directions.B then moveVec = moveVec - (hrp.CFrame.LookVector) end
		if directions.L then moveVec = moveVec - (hrp.CFrame.RightVector) end
		if directions.R then moveVec = moveVec + (hrp.CFrame.RightVector) end
		if directions.U then moveVec = moveVec + Vector3.new(0,1,0) end
		if directions.D then moveVec = moveVec - Vector3.new(0,1,0) end

		hrp.Velocity = moveVec.Unit * flySpeed
	end
end)
